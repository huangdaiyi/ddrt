<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="js/jquery.js"></script>
</head>
<body>
  <textarea id="text-area">werwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwcfggdfgdfgdfgd23435345fggggggggggggggggggdf</textarea>

  <script type="text/javascript" language="javascript">
 //  resizeIt = function() {
 //    var str = $('#text-area').val();
 //    var cols =  $('#text-area').prop("cols");

 //    var linecount = 0;
 //    var rows = str.split("\n");

 //    $.each(rows, function() {
 //        if (this.length === 0) {
 //          linecount += 1;
 //         }else{
 //            linecount += Math.ceil( this.length / cols );
 //         }
 //    } );

 //    $('#text-area').attr("rows", linecount + 1 );
 //  };

 // $('#text-area').on("keydown", resizeIt);
 //  resizeIt(); //initial on load
  ;(function($){
    $.fn.textareaAutoResize = function(options){
        var settings = $.extend({
            rows: 1,
            cols: 20,
            maxRow:10
        }, options);

        return this.each(function(){
          var $textWrap = $(this);
          $textWrap.data(settings);
          $textWrap.on("keydown", resizeIt);
          $textWrap.trigger("keydown");
        });
    };
    var resizeIt = function(){
      var $textarea = $(this);
      var str =  $textarea.val();
      var cols =   $textarea.prop("cols");

      var linecount = $textarea.data().rows;
      var rows = str.split("\n");

      $.each(rows, function() {
          if (this.length === 0) {
            linecount += 1;
           }else{
              linecount += Math.ceil( this.length / cols );
           }
      });
      $textarea.data().maxRow > linecount &&
      $textarea.attr("rows", linecount);
    };
  })(jQuery);

  $("textarea").textareaAutoResize();
  </script>

  <a href="test.html">DDDD</a>
</body>
</html>